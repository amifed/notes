# 树形 DP

## [没有上司的舞会](https://www.acwing.com/problem/content/287/)

### 状态定义

$f(x,0)$ 表示当前节点参加舞会时的最大值，$f(x,1)$ 表示当前节点不参加舞会时的最大值；

### 状态计算

对于节点 x，只需考虑它 **参加舞会** 和 **不参加舞会** 两种情况：

- $f(x,0)$，即不参加舞会，此时 x 的子节点可以参加舞会，可以不参加舞会，取所有子节点的两种情况的最大值再求和

$$
\large\displaystyle f(x,0)=\sum_{s\in Son(x)}\max\{~f(s,0),f(s,1)~\}
$$

- $f(x,1)$，即参加舞会，此时 x 的子节点不可以参加舞会，取所有子节点一种情况的和

$$
\large\displaystyle f(x,1)=h(x)+\sum_{s\in Son(x)}f(s,0)
$$

### 初始状态

对于每个节点，$f(x,0)=0, f(x,1)=h(x)$

### 最终结果

$\max~\{~f(root,0),f(root,1)~\}$

<<< @/docs/solution/acwing/算法竞赛进阶指南/0x50动态规划/src/树形DP/没有上司的舞会.cpp

**复杂度分析**

- 时间复杂度 $\large O(n)$，递归遍历所有节点；
- 空间复杂度 $\large O(n)$，记录每个节点的状态；
